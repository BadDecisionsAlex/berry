---
layout: default
---

# Expressions

## 基础

Berry定义了一些一元运算符和一些二元运算符。例如逻辑与`&&`是一个二元运算符而逻辑非`!`是一个医院运算符。有些运算符既可以作为一元运算符也可以作为二元运算符，例如`-`运算符在表达式`1 - 2`中表示减法运算，而在表达式`-1`中表示取负数运算符。

运算时要注意操作数是否支持当前的运算，例如运算`"10"+10`是非法的，因为Berry不允许将一个字符串和一个整数相加，通常Berry不会暗地里进行类型转换，但是当你试图对一个整数和一个浮点数执行加法运算时，Berry会将整数自动转换成浮点数参与运算，例如执行`1.1+1`将得到结果`2.1`。

在表达式中，运算符的优先级和结合性决定计算的顺序。运算符的优先级和结合律已经在[Basic Concepts](./basic-concepts.html)一章中给出。

优先级规定了不同运算符之间的计算顺序，优先级高的表达式将会先求值，例如对表达式`1+2*3`求值时将会先计算`2*3`的结果，然后再计算加法表达式。

结合律规定了运算符两边的操作数的计算次序，例如加法运算`expr1 + expr2`中会先计算`expr1`的值再计算`expr2`的值，因此加法运算符左结合的。

### 算术运算符

| OPERATOR | FUNCTION |   EXAMPLES    |
| :------: | :------: | :-----------: |
|   `+`    | 一元正号 |   `+ expr`    |
|   `-`    | 一元负号 |   `- expr`    |
|   `+`    |   加法   | `expr + expr` |
|   `-`    |   减法   | `expr - expr` |
|   `*`    |   乘法   | `expr * expr` |
|   `/`    |   除法   | `expr / expr` |
|   `%`    |   求余   | `expr % expr` |

对于加法运算，当操作数为两个字符串时，将执行字符串的连接操作。而求余运算只适用于整数类型，当然，你也可以在类中重载这一运算符。

#### 类型提升

当算术运算（求余除外）的操作数为一个整数和一个浮点数时，整数对象对被提升为浮点数进行计算。除此之外，Berry不会进行其他的隐式类型转换。

### 关系运算符

| OPERATOR | FUNCTION |    EXAMPLES    |
| :------: | :------: | :------------: |
|   `<`    |   小于   | `expr < expr`  |
|   `<=`   | 小于等于 | `expr <= expr` |
|   `==`   |   等于   | `expr == expr` |
|   `!=`   |  不等于  | `expr != expr` |
|   `>=`   | 大于等于 | `expr >= expr` |
|   `>`    |   大于   | `expr > expr`  |

### 逻辑运算符

| OPERATOR | FUNCTION |    EXAMPLES    |
| :------: | :------: | :------------: |
|   `&&`   |  逻辑与  | `expr && expr` |
|   `||`   |  逻辑或  | `expr || expr` |
|   `!`    |  逻辑非  |    `! expr`    |

### 赋值运算符

赋值运算符只出现在赋值表达式中，赋值运算符的左操作数必须是一个可以修改的对象，而赋值表达式不会返回值。你不可以像C语言那样在一个表达式中间使用赋值运算符，相反，一个表达式中只能有一次赋值运算。



### 成员运算符和下标运算符

成员运算符`.`用于访问类对象的成员字段。例如

``` ruby
l = list()
l.append("item 0")
s = l.item(0)
```

下标运算符`[]`用于访问对象的某个元素，例如

``` ruby
n = l[2]
```

会返回对象`l`中下标`2`所对应的元素。